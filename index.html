<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SHARK RNG | CLASSIC</title>
    <style>
        :root {
            --bg: #01060f; --accent: #00f2ff; --panel: rgba(0, 15, 30, 0.95);
            --c-COMMON: #a0a0a0; --c-UNCOMMON: #4caf50; --c-RARE: #2196f3;
            --c-EPIC: #9c27b0; --c-LEGENDARY: #ffc107; --c-ABYSSAL: #ff3d00;
            --c-SUNKEN: #00ffcc; --c-PREHISTORIC: #ffffff; --c-VOID: #ff00ff;
        }
        body, html { margin: 0; padding: 0; height: 100%; background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; overflow: hidden; user-select: none; }
        
        /* --- SHARK ENGINE --- */
        #shark-container { margin: 20px auto; width: 300px; height: 150px; position: relative; }
        #shark-engine { position: relative; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; animation: global-swim 4s infinite ease-in-out; }
        .shark-part { position: absolute; background: var(--accent); box-shadow: 0 0 20px var(--accent); transition: 0.3s; }
        .shark-body { width: 130px; height: 55px; border-radius: 50% 50% 40% 40%; left: 85px; }
        .shark-fin { width: 0; height: 0; border-left: 25px solid transparent; border-right: 25px solid transparent; border-bottom: 45px solid var(--accent); top: 15px; left: 125px; }
        .shark-tail { width: 0; height: 0; border-top: 30px solid transparent; border-bottom: 30px solid transparent; border-left: 45px solid var(--accent); left: 50px; animation: tail-wag 0.6s infinite ease-in-out; }
        
        @keyframes global-swim { 0%, 100% { transform: translateX(-30px); } 50% { transform: translateX(30px); } }
        @keyframes tail-wag { 0%, 100% { transform: rotateY(0deg); } 50% { transform: rotateY(50deg); } }
        .frenzy { animation-duration: 0.15s !important; }

        /* --- UI ELEMENTS --- */
        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 5000; display: none; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
        .side-panel { position: absolute; top: 20px; bottom: 20px; width: 250px; background: var(--panel); border: 1px solid rgba(0, 242, 255, 0.2); border-radius: 20px; display: flex; flex-direction: column; overflow: hidden; }
        #inventory-panel { left: 20px; } #perks-panel { right: 20px; }
        .p-content { flex: 1; overflow-y: auto; padding: 15px; }
        
        #roll-btn { padding: 20px 60px; font-size: 1.8rem; border-radius: 50px; background: #fff; color: #000; font-weight: 900; border: none; cursor: pointer; box-shadow: 0 0 30px var(--accent); }
        .btn { padding: 8px 15px; background: transparent; border: 1px solid var(--accent); color: white; border-radius: 5px; cursor: pointer; margin: 5px; font-weight: bold; }
        
        .g-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px; width: 100%; overflow-y: auto; padding: 10px; }
        .g-card { background: rgba(255,255,255,0.05); padding: 10px; border-radius: 10px; text-align: center; border: 1px solid #333; font-size: 0.8rem; }
        .locked { opacity: 0.1; filter: grayscale(1); }

        /* --- NOTIFICATION --- */
        #reveal { position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 6000; display: none; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
    </style>
</head>
<body>

    <audio id="bg-music" loop><source src="https://ia804500.us.archive.org/27/items/super-mario-kart-koopa-beach-music/Super%20Mario%20Kart%20-%20Koopa%20Beach.mp3" type="audio/mpeg"></audio>

    <div id="start-screen" class="overlay" style="display:flex;">
        <h1 style="color:var(--accent); font-size: 4rem; letter-spacing: 15px; margin:0;">SHARK RNG</h1>
        <p style="letter-spacing: 5px; color: #555;">ABYSSAL EDITION</p>
        <button id="roll-btn" onclick="startGame()">START FISHING</button>
    </div>

    <div id="reveal" onclick="this.style.display='none'; state.rolling=false;">
        <div id="rev-emoji" style="font-size:100px;"></div>
        <h1 id="rev-name" style="margin:10px 0;"></h1>
        <h2 id="rev-odds" style="color:var(--accent);"></h2>
        <p style="opacity:0.5;">CLICK TO CONTINUE</p>
    </div>

    <div id="gallery-overlay" class="overlay">
        <h2>COLLECTION BOOK (<span id="collect-count">0/0</span>)</h2>
        <div id="gallery-grid" class="g-grid"></div>
        <button class="btn" onclick="closeOverlay('gallery-overlay')">CLOSE BOOK</button>
    </div>

    <div id="main-game" style="display:none; height:100%; flex-direction:column; align-items:center; justify-content:center;">
        <div class="side-panel" id="inventory-panel">
            <div style="padding:15px; text-align:center; background:rgba(0,242,255,0.1); font-weight:bold;">LOGS</div>
            <div id="inv-list" class="p-content"></div>
            <button class="btn" onclick="openGallery()">COLLECTION</button>
        </div>

        <div style="text-align:center;">
            <h2 id="luck-display" style="color:var(--accent); letter-spacing:3px;">LUCK: 1.0x</h2>
            <div id="shark-container">
                <div id="shark-engine">
                    <div class="shark-tail shark-part"></div>
                    <div class="shark-body shark-part"></div>
                    <div class="shark-fin shark-part"></div>
                </div>
            </div>
            <button id="roll-btn" onclick="roll()">DROP BAIT</button>
            <h1 id="roll-display" style="margin-top:20px;">ROLLS: 0</h1>
            <div id="auto-status" style="color:#4caf50; font-weight:bold; visibility:hidden;">AUTO-ROLL ACTIVE</div>
        </div>

        <div class="side-panel" id="perks-panel">
            <div style="padding:15px; text-align:center; background:rgba(0,242,255,0.1); font-weight:bold;">PERKS</div>
            <div id="perk-list" class="p-content"></div>
        </div>
    </div>

    <script>
        const RARITIES = {
            COMMON: { w: 1, c: "#a0a0a0" }, UNCOMMON: { w: 5, c: "#4caf50" },
            RARE: { w: 25, c: "#2196f3" }, EPIC: { w: 100, c: "#9c27b0" },
            LEGENDARY: { w: 800, c: "#ffc107" }, ABYSSAL: { w: 5000, c: "#ff3d00" },
            SUNKEN: { w: 25000, c: "#00ffcc" }, PREHISTORIC: { w: 150000, c: "#ffffff" },
            VOID: { w: 1000000, c: "#ff00ff" }
        };

        const ITEMS = [
            { n: "Old Boot", i: "ðŸ¥¾", r: "COMMON" }, { n: "Driftwood", i: "ðŸªµ", r: "COMMON" },
            { n: "Plastic Bottle", i: "ðŸ¼", r: "COMMON" }, { n: "Tiny Guppy", i: "ðŸŸ", r: "COMMON" },
            { n: "Seaweed", i: "ðŸŒ¿", r: "UNCOMMON" }, { n: "Baby Shark", i: "ðŸ¦ˆ", r: "UNCOMMON" },
            { n: "Blowfish", i: "ðŸ¡", r: "UNCOMMON" }, { n: "Blue Jellyfish", i: "ðŸª¼", r: "UNCOMMON" },
            { n: "Crab King", i: "ðŸ¦€", r: "RARE" }, { n: "Electric Eel", i: "ðŸ", r: "RARE" },
            { n: "Golden Hook", i: "ðŸª", r: "RARE" }, { n: "Stingray", i: "ðŸ›¹", r: "RARE" },
            { n: "Giant Squid", i: "ðŸ¦‘", r: "EPIC" }, { n: "Zombie Shark", i: "ðŸ§Ÿ", r: "EPIC" },
            { n: "Deep Sea Angler", i: "ðŸ®", r: "EPIC" }, { n: "Great White", i: "ðŸ¦ˆ", r: "LEGENDARY" },
            { n: "Whale Shark", i: "ðŸ‹", r: "LEGENDARY" }, { n: "Hammerhead", i: "ðŸ”¨", r: "LEGENDARY" },
            { n: "Magma Shark", i: "ðŸŒ‹", r: "ABYSSAL" }, { n: "Ghost Shark", i: "ðŸ‘»", r: "ABYSSAL" },
            { n: "Neon Leviathan", i: "ðŸ²", r: "ABYSSAL" }, { n: "Poseidon Fork", i: "ðŸ”±", r: "SUNKEN" },
            { n: "Atlantis Key", i: "ðŸ”‘", r: "SUNKEN" }, { n: "Megalodon", i: "ðŸ¦´", r: "PREHISTORIC" },
            { n: "Ancient Mosasaur", i: "ðŸŠ", r: "PREHISTORIC" }, { n: "Void Singularity", i: "ðŸŒ€", r: "VOID" },
            { n: "The Kraken", i: "ðŸ™", r: "VOID" }
        ];

        const PERKS = [
            { n: 'Shiny Lure', req: 25, mult: 1.5 },
            { n: 'Basic Auto', req: 50, auto: true },
            { n: 'Iron Rod', req: 150, mult: 3.0 },
            { n: 'Double Bait', req: 300, mult: 5.0 },
            { n: 'Sonar Pulse', req: 750, mult: 10.0 },
            { n: 'Abyssal Magnet', req: 1500, mult: 25.0 },
            { n: 'Oceanic Soul', req: 3000, mult: 50.0 },
            { n: 'Godly Aura', req: 7500, mult: 100.0 },
            { n: 'Void Ritual', req: 15000, mult: 500.0 },
            { n: 'Infinite Void', req: 50000, mult: 2500.0 }
        ];

        let state = { rolls: 0, inv: {}, luck: 1.0, isAuto: false, rolling: false };

        function startGame() {
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('main-game').style.display = 'flex';
            document.getElementById('bg-music').play().catch(() => {});
            load();
            updateUI();
        }

        function roll() {
            if (state.rolling) return;
            state.rolling = true;
            state.rolls++;
            
            document.getElementById('shark-engine').classList.add('frenzy');

            setTimeout(() => {
                let tier = "COMMON";
                const sorted = Object.keys(RARITIES).sort((a,b) => RARITIES[b].w - RARITIES[a].w);
                for (let r of sorted) {
                    if (Math.random() < (1 / (r === "COMMON" ? 1 : RARITIES[r].w / state.luck))) { 
                        tier = r; break; 
                    }
                }

                const pool = ITEMS.filter(i => i.r === tier);
                const item = pool[Math.floor(Math.random() * pool.length)];
                state.inv[item.n] = (state.inv[item.n] || 0) + 1;

                document.getElementById('shark-engine').classList.remove('frenzy');
                save();
                checkPerks();
                updateUI();

                if (tier !== "COMMON" && tier !== "UNCOMMON") {
                    showReveal(item);
                } else {
                    state.rolling = false;
                    if(state.isAuto) setTimeout(roll, 200);
                }
            }, 300);
        }

        function showReveal(item) {
            document.getElementById('rev-emoji').innerText = item.i;
            document.getElementById('rev-name').innerText = item.n;
            document.getElementById('rev-name').style.color = RARITIES[item.r].c;
            document.getElementById('rev-odds').innerText = `1 / ${RARITIES[item.r].w.toLocaleString()}`;
            document.getElementById('reveal').style.display = 'flex';
        }

        function updateUI() {
            document.getElementById('roll-display').innerText = `ROLLS: ${state.rolls}`;
            document.getElementById('luck-display').innerText = `LUCK: ${state.luck.toLocaleString()}x`;
            
            const log = document.getElementById('inv-list');
            log.innerHTML = Object.entries(state.inv).reverse().slice(0, 10).map(([name, count]) => {
                const it = ITEMS.find(x => x.n === name);
                return `<div style="color:${RARITIES[it.r].c}">${it.i} ${name} x${count}</div>`;
            }).join('');

            document.getElementById('perk-list').innerHTML = PERKS.map(p => `
                <div style="padding:5px; border-bottom:1px solid #222; opacity:${state.rolls >= p.req ? 1 : 0.2}">
                    <b>${p.n}</b><br><small>${p.req} Rolls</small>
                </div>
            `).join('');

            if(state.isAuto) document.getElementById('auto-status').style.visibility = 'visible';
        }

        function checkPerks() {
            let mult = 1.0;
            PERKS.forEach(p => {
                if(state.rolls >= p.req) {
                    if(p.mult) mult = p.mult;
                    if(p.auto) state.isAuto = true;
                }
            });
            state.luck = mult;
        }

        function openGallery() {
            const grid = document.getElementById('gallery-grid');
            let ownedCount = 0;
            grid.innerHTML = ITEMS.map(it => {
                const owned = state.inv[it.n] > 0;
                if(owned) ownedCount++;
                return `<div class="g-card ${owned ? '' : 'locked'}">
                    <div style="font-size:25px">${it.i}</div>
                    <div style="color:${RARITIES[it.r].c}; font-weight:bold;">${it.r}</div>
                    <div>${it.n}</div>
                    <div style="font-size:9px; opacity:0.5;">1/${RARITIES[it.r].w.toLocaleString()}</div>
                </div>`;
            }).join('');
            document.getElementById('collect-count').innerText = `${ownedCount}/${ITEMS.length}`;
            document.getElementById('gallery-overlay').style.display = 'flex';
        }

        function save() { localStorage.setItem('sharkRNG_Classic', JSON.stringify(state)); }
        function load() {
            const d = localStorage.getItem('sharkRNG_Classic');
            if(d) {
                const parsed = JSON.parse(d);
                state.rolls = parsed.rolls;
                state.inv = parsed.inv;
                checkPerks();
            }
        }
        function closeOverlay(id) { document.getElementById(id).style.display = 'none'; if(id === 'reveal' && state.isAuto) roll(); }
    </script>
</body>
</html>
